function rules = load_template_rules()
    template_path = fullfile(pwd, 'templates', 'diagnostic_rules.json');
    if exist(template_path, 'file')
        rules = jsondecode(fileread(template_path));
    else
        rules = create_default_rules();
    end
end

function rules = create_default_rules()
    rules = struct(...
        'lock_contention', struct(...
            'metrics', {{'lock_wait_time', 'lock_queue_length'}},...
            'pattern', 'lock_wait_time > 2 * avg_normal'...
        ),...
        'io_bottleneck', struct(...
            'metrics', {{'io_wait_time', 'disk_queue_length'}},...
            'pattern', 'io_wait_time > 3 * avg_normal'...
        )...
    );
end 